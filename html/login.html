<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Zotic</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <div class="background">
      <div class="heading">
        <h1>Game Zotic</h1>
      </div>
      <div class="box">
        <!-- LOGIN FORM STARTS HERE -->

        <div class="login-box">
          <div class="form-title">
            <h1>Log in</h1>
          </div>
          <div class="form-group">
            <label for="phone_number">Mobile</label><br />
            <input
              type="number"
              name="phone_number"
              id="phone_number"
              required
              oninput="javascript: if
            (this.value.length > this.maxLength) this.value =
            this.value.slice(0, this.maxLength);"
              maxlength="10"
            />
          </div>

          <div class="form-group">
            <div class="btn">
              <a href="otp.html"
                ><button type="submit" name="login" id="login">
                  Continue
                </button></a
              >
            </div>
          </div>
          <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
          <script>
            $(document).ready(function () {
              $("#login").click(function (event) {
                event.preventDefault(); // Prevent the default form submission behavior

                // Get the input values
                var username = $("#username").val();
                //var password = $('#password').val();

                // Create the data object
                var data = {
                  email: username,
                  //password: password
                };

                // Send the AJAX request
                $.ajax({
                  type: "POST",
                  url: "/api/login",
                  data: JSON.stringify(data),
                  contentType: "application/json",
                  success: function (response) {
                    // Handle the successful response
                    //console.log("success");
                    if (response.redirect_url) {
                      // Redirect the user to the specified URL
                      var redirectUrl =
                        "/verify/?email=" + encodeURIComponent(username);
                      window.location.href = redirectUrl;
                    } else {
                      // Perform any other actions for a successful login
                      window.location.href = "/home";
                      console.log("Login successful");
                    }
                    // Redirect the user to a new page or perform any other actions
                  },
                  error: function (error) {
                    // Handle the error response
                    if (error.responseJSON && error.responseJSON.message) {
                      // Display the error message in the HTML page
                      $("#error-message").text(error.responseJSON);
                    } else {
                      $("#error-message").text(
                        "An error occurred. Please try again."
                      );
                    }
                  },
                });
              });
            });
          </script>

          <!-- LOGIN FORM ENDS HERE -->

          <hr>
<div class="external">
          <!-- SIGN IN WITH Google -->
          <div class="google-btn">
            <button>
            <div class="google-icon-wrapper">
              <img class="google-icon" src="/img/google.png"/>
            </div>
            <p class="btn-text">Continue with google</p>
            </button>
          </div>

          <!-- SIGN IN WITH EMAIL  -->
          <div class="email-btn">
            <button>
            <div class="google-icon-wrapper">
              <img class="google-icon" src="/img/email.png"/>
            </div>
            <p class="btn-text">Continue with Email</p>
            </button>
          </div>
</div>

          <!-- SING IN WITH google END -->
        </div>
      </div>
      <div class="footer">
        <p>&copy Copyright | <span>Nuvion Technologies</span></p>
      </div>
    </div>
  </body>
</html>
